# æ•°å­—å½©ç¥¨æ¨¡å—æ¶æ„è¯´æ˜

## ğŸ—ï¸ é‡æ„åçš„æ¶æ„

### ğŸ“ ç›®å½•ç»“æ„
```
digital/
â”œâ”€â”€ ğŸ“‚ core/                    # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ lotteryTypes.ts         # å½©ç§ç±»å‹å®šä¹‰ï¼ˆæ›´ç›´è§‚ï¼‰
â”‚   â”œâ”€â”€ lotteryRules.ts         # å½©ç§è§„åˆ™æ ¡éªŒï¼ˆæ›´æ˜ç¡®ï¼‰
â”‚   â””â”€â”€ lotteryConfigs.ts       # å½©ç§é…ç½®å¸¸é‡ï¼ˆæ›´æ¸…æ™°ï¼‰
â”œâ”€â”€ ğŸ“‚ lotteryTypes/            # å½©ç§å®ç°ï¼ˆæ›´æ˜ç¡®ï¼‰
â”‚   â”œâ”€â”€ superLotto/             # å¤§ä¹é€
â”‚   â”‚   â”œâ”€â”€ superLottoStore.ts  # å¤§ä¹é€çŠ¶æ€ç®¡ç†ï¼ˆæ›´æ˜ç¡®ï¼‰
â”‚   â”‚   â””â”€â”€ betCalculator.ts    # æŠ•æ³¨è®¡ç®—å™¨ï¼ˆæ›´æ˜ç¡®ï¼‰
â”‚   â”œâ”€â”€ sevenStar/              # ä¸ƒæ˜Ÿå½©
â”‚   â”‚   â””â”€â”€ sevenStarStore.ts   # ä¸ƒæ˜Ÿå½©çŠ¶æ€ç®¡ç†ï¼ˆæ›´æ˜ç¡®ï¼‰
â”‚   â”œâ”€â”€ arrangedThree/          # æ’åˆ—ä¸‰
â”‚   â”‚   â””â”€â”€ arrangedThreeStore.ts # æ’åˆ—ä¸‰çŠ¶æ€ç®¡ç†ï¼ˆæ›´æ˜ç¡®ï¼‰
â”‚   â””â”€â”€ arrangedFive/           # æ’åˆ—äº”
â”‚       â””â”€â”€ arrangedFiveStore.ts # æ’åˆ—äº”çŠ¶æ€ç®¡ç†ï¼ˆæ›´æ˜ç¡®ï¼‰
â”œâ”€â”€ ğŸ“‚ shared/                  # å…±äº«èµ„æº
â”‚   â”œâ”€â”€ uiComponents/           # UIç»„ä»¶ï¼ˆæ›´æ˜ç¡®ï¼‰
â”‚   â”œâ”€â”€ businessHooks/          # ä¸šåŠ¡é€»è¾‘hooksï¼ˆæ›´æ˜ç¡®ï¼‰
â”‚   â””â”€â”€ utilityFunctions/       # å·¥å…·å‡½æ•°ï¼ˆæ›´æ˜ç¡®ï¼‰
â”œâ”€â”€ ğŸ“‚ betSlip/                 # æŠ•æ³¨å•ï¼ˆæ›´ç›´è§‚ï¼‰
â”‚   â”œâ”€â”€ slipState.ts            # æŠ•æ³¨å•çŠ¶æ€ï¼ˆæ›´æ˜ç¡®ï¼‰
â”‚   â”œâ”€â”€ ticketFactory.ts        # ç¥¨æ®å·¥å‚ï¼ˆæ›´ç›´è§‚ï¼‰
â”‚   â”œâ”€â”€ ticketRenderers/        # ç¥¨æ®æ¸²æŸ“å™¨ï¼ˆæ›´æ˜ç¡®ï¼‰
â”‚   â””â”€â”€ slipPage.tsx            # æŠ•æ³¨å•é¡µé¢ï¼ˆæ›´æ˜ç¡®ï¼‰
â”œâ”€â”€ ğŸ“‚ lotteryPages/            # å½©ç§é¡µé¢ï¼ˆæ›´æ˜ç¡®ï¼‰
â””â”€â”€ ğŸ“‚ index.tsx                # ä¸»å…¥å£ï¼ˆæ ¹æ®lotteryInfo.lotteryNameæ˜¾ç¤ºå¯¹åº”å½©ç§ï¼‰
```

## ğŸ¯ æ¶æ„ç‰¹ç‚¹

### 1. **è§£è€¦è®¾è®¡**
- **ç±»å‹ç»Ÿä¸€åŒ–**ï¼š`DigitalTicket` è”åˆç±»å‹ï¼Œæ”¯æŒæ‰€æœ‰å½©ç§
- **æ ¡éªŒåˆ†ç¦»**ï¼š`lotteryRules.ts` ç‹¬ç«‹æ ¡éªŒé€»è¾‘ï¼Œä¸è€¦åˆUI
- **è®¡ç®—å™¨ç‹¬ç«‹**ï¼šæ¯ä¸ªå½©ç§çš„è®¡ç®—é€»è¾‘ç‹¬ç«‹ï¼Œä¾¿äºæµ‹è¯•å’Œç»´æŠ¤

### 2. **å¯æ‰©å±•æ€§**
- **Storeå·¥å‚**ï¼š`positionStoreFactory` ç”Ÿæˆä½ç½®å‹å½©ç¥¨çš„é€šç”¨store
- **æ¸²æŸ“å™¨æ³¨å†Œ**ï¼š`rendererRegistry` åŠ¨æ€é€‰æ‹©ç¥¨æ®æ¸²æŸ“ç»„ä»¶
- **ç¥¨æ®æ„å»ºå™¨**ï¼š`ticketFactory` ç»Ÿä¸€æ„å»ºç¥¨æ®çš„æ¥å£

### 3. **ä»£ç å¤ç”¨**
- **å…±äº«ç»„ä»¶**ï¼š`BaseNumberGrid`ã€`CommonBetFooter` ç­‰é€šç”¨UIç»„ä»¶
- **é€šç”¨é€»è¾‘**ï¼šä½ç½®å‹å½©ç¥¨çš„é€šç”¨storeå’Œè®¡ç®—é€»è¾‘
- **ç±»å‹å®‰å…¨**ï¼šTypeScriptç±»å‹ç³»ç»Ÿä¿è¯æ•°æ®ç»“æ„ä¸€è‡´æ€§

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### æ·»åŠ æ–°å½©ç§
1. åœ¨ `lotteryTypes/` ä¸‹åˆ›å»ºæ–°å½©ç§ç›®å½•
2. å®ç° `gameState.ts` å’Œ `betCalculator.ts`
3. åœ¨ `core/lotteryTypes.ts` ä¸­æ·»åŠ å½©ç§ç±»å‹
4. åœ¨ `core/lotteryConfigs.ts` ä¸­æ·»åŠ å½©ç§é…ç½®
5. åœ¨ `betSlip/ticketFactory.ts` ä¸­æ·»åŠ ç¥¨æ®æ„å»ºå™¨
6. åœ¨ `betSlip/ticketRenderers/` ä¸­æ·»åŠ æ¸²æŸ“å™¨

### ç¥¨æ®æ„å»ºæµç¨‹
```typescript
// 1. ä»å½©ç§storeè·å–é€‰å·çŠ¶æ€
const store = useSuperLottoStore.getState();
const ticket = await store.buildTicket();

// 2. æ·»åŠ åˆ°æŠ•æ³¨å•
const betlistStore = useBetlistStore.getState();
betlistStore.addTicket(ticket);
```

### ç¥¨æ®æ¸²æŸ“
```typescript
// æ ¹æ®å½©ç§ç±»å‹è‡ªåŠ¨é€‰æ‹©æ¸²æŸ“å™¨
const Renderer = getRenderer(ticket.lotteryType);
return <Renderer ticket={ticket} onRemove={handleRemove} />;
```

## ğŸš€ ä¼˜åŠ¿

- **å¯ç»´æŠ¤æ€§**ï¼šæ¯ä¸ªæ¨¡å—èŒè´£å•ä¸€ï¼Œä¿®æ”¹å½±å“èŒƒå›´å°
- **å¯æµ‹è¯•æ€§**ï¼šä¸šåŠ¡é€»è¾‘ä¸UIåˆ†ç¦»ï¼Œä¾¿äºå•å…ƒæµ‹è¯•
- **å¯æ‰©å±•æ€§**ï¼šæ–°å¢å½©ç§åªéœ€åœ¨ `lotteryTypes/` ä¸‹æ·»åŠ ç›®å½•
- **ç±»å‹å®‰å…¨**ï¼šå®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰
- **ä»£ç å¤ç”¨**ï¼šé¿å…é‡å¤ä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡

## ğŸ“ æ³¨æ„äº‹é¡¹

1. æ‰€æœ‰å½©ç§å¿…é¡»å®ç°ç»Ÿä¸€çš„ `DigitalTicket` æ¥å£
2. æ ¡éªŒé€»è¾‘å¿…é¡»æ”¾åœ¨ `core/lotteryRules.ts` ä¸­
3. è®¡ç®—é€»è¾‘å¿…é¡»æ”¾åœ¨å¯¹åº”å½©ç§çš„ `betCalculator.ts` ä¸­
4. æ–°å¢ç»„ä»¶ä¼˜å…ˆè€ƒè™‘æ”¾åœ¨ `shared/uiComponents/` ä¸­
5. ä¿æŒç›®å½•ç»“æ„æ¸…æ™°ï¼Œå‘½åè§„èŒƒç»Ÿä¸€

## ğŸ·ï¸ å‘½åè§„èŒƒ

### æ–‡ä»¶å‘½ååŸåˆ™
- **è§åæ€æ„**ï¼šæ–‡ä»¶åè¦èƒ½æ¸…æ¥šè¡¨è¾¾å…¶åŠŸèƒ½
- **å±‚æ¬¡åˆ†æ˜**ï¼šç›®å½•ç»“æ„è¦ä½“ç°ä¸šåŠ¡å±‚æ¬¡å…³ç³»
- **ä¸€è‡´æ€§**ï¼šç›¸ä¼¼åŠŸèƒ½çš„æ–‡ä»¶ä½¿ç”¨ç›¸ä¼¼çš„å‘½åæ¨¡å¼

### å‘½åç¤ºä¾‹
- `superLottoStore.ts` - å¤§ä¹é€çŠ¶æ€ç®¡ç†ï¼ˆæ›´æ˜ç¡®ï¼‰
- `sevenStarStore.ts` - ä¸ƒæ˜Ÿå½©çŠ¶æ€ç®¡ç†ï¼ˆæ›´æ˜ç¡®ï¼‰
- `arrangedThreeStore.ts` - æ’åˆ—ä¸‰çŠ¶æ€ç®¡ç†ï¼ˆæ›´æ˜ç¡®ï¼‰
- `arrangedFiveStore.ts` - æ’åˆ—äº”çŠ¶æ€ç®¡ç†ï¼ˆæ›´æ˜ç¡®ï¼‰
- `betCalculator.ts` - æŠ•æ³¨è®¡ç®—å™¨
- `ticketFactory.ts` - ç¥¨æ®å·¥å‚
- `slipState.ts` - æŠ•æ³¨å•çŠ¶æ€
- `lotteryTypes.ts` - å½©ç§ç±»å‹å®šä¹‰
- `lotteryRules.ts` - å½©ç§è§„åˆ™æ ¡éªŒ

## ğŸ”„ ä¸šåŠ¡æµç¨‹

### å…¥å£é€»è¾‘
```typescript
// æ ¹æ®å¤–éƒ¨ä¼ å…¥çš„lotteryInfo.lotteryNameç›´æ¥æ˜¾ç¤ºå¯¹åº”å½©ç§é¡µé¢
export default function DigitalLotteryPage() {
  const lotteryInfo = useLotteryInfoStore(state => state.lotteryInfo);

  if (lotteryInfo?.lotteryName === LotteryName.SuperLotto) {
    return <SuperLottoPage />;
  } else if (lotteryInfo?.lotteryName === LotteryName.SevenStar) {
    return <SevenStarPage />;
  }
  // ... å…¶ä»–å½©ç§
}
```

### å½©ç§é¡µé¢ç»“æ„
æ¯ä¸ªå½©ç§é¡µé¢åŒ…å«ï¼š
- **é€‰å·åŒºåŸŸ**ï¼šæ ¹æ®å½©ç§è§„åˆ™æ˜¾ç¤ºé€‰å·ç•Œé¢
- **ç©æ³•åˆ‡æ¢**ï¼šå¦‚å¤§ä¹é€çš„æ™®é€š/èƒ†æ‹–æ¨¡å¼
- **æŠ•æ³¨æ§åˆ¶**ï¼šæœºé€‰ã€æ¸…ç©ºã€æ·»åŠ åˆ°æŠ•æ³¨å•ç­‰
- **æŠ•æ³¨ä¿¡æ¯**ï¼šæ˜¾ç¤ºæ³¨æ•°ã€é‡‘é¢ç­‰
